{{ define "passwordResetPage" }}


{{ template "header" .}}


  <body>

  	{{ template "navigation" . }}

    <div>

    	<div class="container" style="margin-top: 80px;">
    		<div class="row">
					{{ if .Error  }}
    				<div class="col-md-7 center" id="register-panel-error">
						<div class="panel panel-danger">
							<div class="panel-body">
								System error
							</div>
						</div>
					</div>
					{{ end }}
					
    				{{ if .InvalidToken  }}
    				<div class="col-md-7 center" id="register-panel-error">
						<div class="panel panel-danger">
							<div class="panel-body">
								Invalid token
							</div>
						</div>
					</div>
					{{ end }}

					{{ if .InvalidPassword  }}
					{{ if .ValidationErrors }}
					<div class="col-md-7 center" id="register-panel-error">
						<div class="panel panel-danger">
							<div class="panel-body">
								<ul>
									{{range $e := .ValidationErrors}}
									<li>{{$e}}</li>
									{{ end }}
								</ul>
							</div>
						</div>
					</div>	
					{{ else }}
    				<div class="col-md-7 center" id="register-panel-error">
						<div class="panel panel-danger">
							<div class="panel-body">
								Passwords don't match
							</div>
						</div>
					</div>
					{{ end }}
					{{ end }}
					
    			{{ if .Sent  }}
    				<div class="col-md-7 center" id="register-panel-error">
						<div class="panel panel-success">
							<div class="panel-body">
								Password reset link sent to {{ .Email }}
							</div>
						</div>
					</div>
					{{ end }}

    			{{ if .Success  }}
    				<div class="col-md-7 center" id="register-panel-error">
						<div class="panel panel-success">
							<div class="panel-body">
								Success
							</div>
						</div>
					</div>
    			{{ end }}

                    {{ if .ResetToken }}
    				<div class="col-md-7 center" id="register-panel">
							<div class="panel panel-default">
							  <div class="panel-heading">
							    <h3 class="panel-title">Password reset</h3>
							  </div>
							  <div class="panel-body">
								<form action="" method="POST">
									<input type="hidden" name="csrf_token" value="{{ .Token }}">
									<div class="form-group">
										<label for="password">New password</label>
										<input type="password" class="form-control" id="password" name="password">
                                    </div>
                                    <div class="form-group">
                                            <label for="password_confirmation">New password confirmation</label>
                                            <input type="password" class="form-control" id="password_confirmation" name="password_confirmation">
                                    </div>
                                    <input type="hidden" name="reset_token" value="{{ .ResetToken }}">
									<input type="submit" class="btn btn-success" value="Update"></button>
								</form>
			    			</div>
			    		</div>
                    </div>
                    {{ else }}
    				<div class="col-md-7 center" id="register-panel">
							<div class="panel panel-default">
							  <div class="panel-heading">
							    <h3 class="panel-title">Password reset</h3>
							  </div>
							  <div class="panel-body">
								<form action="" method="POST">
									<input type="hidden" name="csrf_token" value="{{ .Token }}">
									<div class="form-group">
										<label for="email">Email address</label>
										<input type="email" class="form-control" id="email" name="email" placeholder="Enter email">
                                    </div>
                                    <input type="hidden" name="reset_token" value="{{ .ResetToken }}">
									<input type="submit" class="btn btn-success" value="Send password reset email"></button>
								</form>
			    			</div>
			    		</div>
                    </div>
                    {{ end }}

    		</div>

    	</div>

    </div>

	  {{ template "footer" .}}

    </div> <!-- /container -->


    {{ template "scripts" .}}
  </body>
</html>



{{ end }}
