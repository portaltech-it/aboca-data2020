{{ define "oauthHome" }} {{ $org_id := .OrgId}} {{ template "header" .}}
{{ $page := .}}

<body>

	{{ template "navigation" . }}
	<div class="page-header">
		<div class="page-header-container">
			<div class="title">
				<h1 class="pull-left">OAuth clients</h1>
			</div>
		</div>
	</div>
	<div class="container content-wrapper oauth-clients-wrapper">
		{{ if not .Clients }}
		<div class="text-center">
			<div class="alert alert-info text-center">
				No OAuth clients have been created yet
			</div>
			<a href="{{ $page.PortalRoot }}oauth-clients/new" type="button" class="btn btn-success addClientBtn">Create first Oauth Client</a>
		</div>
		{{ else }}
		<a href="{{ $page.PortalRoot }}oauth-clients/new" type="button" class="btn btn-success pull-right addClientBtn">Create new client</a>
		<table class="table table-striped">
	    <thead>
	      <tr>
					<th>API</th>
					<th>App Description</th>
	        <th>Client ID</th>
	        <th>Date</th>
	        <th></th>
	      </tr>
	    </thead>
	    <tbody>
					{{ range $c := .Clients }}
						<tr>
							<td>{{ $c.EntryName }}</td>
							<td>{{ $c.Client.AppDescription }}</td>
							<td>{{ $c.Client.ClientID }}</td>
							<td>{{ $c.Client.DateCreated }}</td>
							<td class="btn-toolbar">
								<button type="button" class="btn btn-small btn-danger pull-right outline delete-client" data-toggle="modal" data-target="#deleteClient" data-client="{{ $c.Client.ClientID }}">Delete</button>
								<button type="button" class="btn btn-small btn-danger pull-right outline revoke-tokens" data-toggle="modal" data-target="#revokeTokens" data-client="{{ $c.Client }}">Revoke Tokens</button>
							</td>
						</tr>
					{{ end }}
	    </tbody>
		</table>
		{{ end }}
		<form method="post" id="oauth_actions">
			<input type="hidden" id="oauth_client_id" name="oauth_client_id"/>
			<input type="hidden" id="csrf_token" name="csrf_token" value="{{ .Token }}">
		</form>
		<ul class="pagination pagination-sm"></ul>
		  <div class="modal fade" id="deleteClient">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="myModalLabel">Delete Client</h4>
        </div>
        <div class="modal-body">
          Are you sure you want to delete this client ?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-small btn-default" data-dismiss="modal">Cancel</button>
					<button type="button" class="btn btn-small btn-danger pull-right oauth-delete">Delete</button>
        </div>
      </div>
    </div>
	</div>
</div>
</div>
<div class="modal fade" id="revokeTokens">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">Revoke Tokens</h4>
			</div>
			<div class="modal-body">
				Are you sure you want to revoke all tokens ?
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-small btn-default" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-small btn-danger pull-right revoke-all-tokens">Revoke</button>
			</div>
		</div>
	</div>
	</div>
	<div class="modal fade" id="apiAction">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">Revoke Tokens</h4>
				</div>
				<div class="modal-body"></div>
				<div class="modal-footer">
					<button type="button" class="btn btn-small btn-success" data-dismiss="modal">OK</button>
				</div>
			</div>
		</div>
		</div>

	{{ template "footer" .}}


	{{ template "scripts" .}}
</body>

</html>
{{ end }}
